<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise封装AJAX操作</title>
</head>
<body>
    <script>
        /**
         * 封装一个函数 sendAJAX 发送 GET AJAX 请求
         * 参数   URL
         * 返回结果 Promise 对象
         */
        // const url = 'https://mock.apifox.cn/m2/1646525-0-default/40660181?word=js'

        function sendAJAX(url) {
                return new Promise((resolve, reject)=>{
                    const xhr = new XMLHttpRequest()
                    xhr.open('get',url)
                    xhr.responseType='json'
                    xhr.send(null)
                    xhr.onreadystatechange =()=>{
                        if (xhr.readyState ===4){
                            if (xhr.status>=200&& xhr.status<300){
                                resolve(xhr.response)
                            }else {
                                reject(xhr.status)
                            }
                        }
                    }

                })
        }

            sendAJAX(url).then(value=>{
                console.log(value)
            },(reason)=>{
                console.warn(reason)
            })


    </script>
</body>
</html>